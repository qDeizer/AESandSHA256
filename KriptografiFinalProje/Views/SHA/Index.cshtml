@{
    ViewData["Title"] = "SHA-256";
}

<div class="container">
    <h1 class="text-center mb-5 page-title" style="color: #00ff00; text-shadow: 0 0 10px rgba(0, 255, 0, 0.5);">
        SHA-256 Özet Çıkarma
    </h1>

    <div class="row">
        <!-- Metin Özeti -->
        <div class="col-md-6 mb-4">
            <div class="cyber-card left-card">
                <h3 class="mb-4">
                    <i class="fas fa-font me-2"></i>
                    Metin Özeti
                </h3>
                <div class="form-group mb-3">
                    <label for="metin">Metin</label>
                    <textarea id="metin" class="form-control" rows="4"></textarea>
                </div>
                <button onclick="metinOzetiCikar()" class="cyber-btn">
                    <i class="fas fa-fingerprint me-2"></i>
                    Özet Çıkar
                </button>
            </div>
        </div>

        <!-- Dosya Özeti -->
        <div class="col-md-6 mb-4">
            <div class="cyber-card right-card">
                <h3 class="mb-4">
                    <i class="fas fa-file me-2"></i>
                    Dosya Özeti
                </h3>
                <div class="form-group mb-3">
                    <label for="dosya">Dosya</label>
                    <input type="file" id="dosya" class="form-control">
                </div>
                <button onclick="dosyaOzetiCikar()" class="cyber-btn">
                    <i class="fas fa-fingerprint me-2"></i>
                    Özet Çıkar
                </button>
            </div>
        </div>
    </div>

    <!-- Özet Sonucu -->
    <div class="cyber-card mt-4 result-section">
        <h3 class="mb-4">
            <i class="fas fa-hashtag me-2"></i>
            SHA-256 Özeti
        </h3>
        <div class="result-container">
            <div id="ozet" class="result-box">
                Özet burada görüntülenecek...
                <button class="copy-btn" onclick="metniKopyala('ozet')" title="Kopyala">
                    <i class="fas fa-copy"></i>
                </button>
            </div>
        </div>
    </div>
</div>

<script>
    console.log("SHA script yüklendi");

    document.querySelector('[onclick="metinOzetiCikar()"]')?.addEventListener("click", () => {
        const metin = document.getElementById("metin").value;
        fetch("/SHA/MetinOzetiCikar", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ metin: metin })
        })
        .then(r => r.json())
        .then(d => {
            document.getElementById("ozet").innerText = d.ozet || "Boş sonuç döndü";
        })
        .catch(e => {
            document.getElementById("ozet").innerText = "Hata oluştu: " + e;
        });
    });

    document.querySelector('[onclick="dosyaOzetiCikar()"]')?.addEventListener("click", () => {
        const dosya = document.getElementById("dosya").files[0];
        const formData = new FormData();
        formData.append("dosya", dosya);
        fetch("/SHA/DosyaOzetiCikar", {
            method: "POST",
            body: formData
        })
        .then(r => r.json())
        .then(d => {
            document.getElementById("ozet").innerText = d.ozet || "Boş sonuç döndü";
        })
        .catch(e => {
            document.getElementById("ozet").innerText = "Hata oluştu: " + e;
        });
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        console.log("SHA script yüklendi");

        document.querySelector('[onclick="metinOzetiCikar()"]')?.addEventListener("click", () => {
            const metin = document.getElementById("metin").value;
            fetch("/SHA/MetinOzetiCikar", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ metin: metin })
            })
            .then(r => r.json())
            .then(d => {
                document.getElementById("ozet").innerText = d.ozet || "Boş sonuç döndü";
            })
            .catch(e => {
                document.getElementById("ozet").innerText = "Hata oluştu: " + e;
            });
        });
    });
</script>
